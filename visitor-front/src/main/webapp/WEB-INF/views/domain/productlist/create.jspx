<html xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" 
xmlns:decorator="http://www.opensymphony.com/sitemesh/decorator" xmlns:c="http://java.sun.com/jsp/jstl/core" 
xmlns:form="http://www.springframework.org/tags/form" xmlns:security="http://www.springframework.org/security/tags" 
xmlns:spring="http://www.springframework.org/tags" version="2.0">
<jsp:output omit-xml-declaration="yes" />
<jsp:directive.page contentType="text/html; charset=UTF-8" />
<head>
	<title><spring:message code="productList" />: <spring:message code="crud.functionalities.create" />
	</title>
	<script type="text/javascript">
		function validate(){
			var reg = /^.*?\.(jpg|png|gif|JPG|PNG|GIF)$/; 
			if(!reg.test($("#cover").val())){
				alert("封面图后缀名必须为jpg/png/gif");
				return false;
			}
			if(!reg.test($("#icon").val())){
				alert("图标后缀名必须为jpg/png/gif");
				return false;
			}
		}
		
		$(document).ready(function() {
			$("#productType").change(function() {
				if($(this).val() == 0) {
					$("#tr_totalDl").hide();
				} else {
					$("#tr_totalDl").show();
				}
			});
		});
	</script>
</head>
<body>
	<a href="${pageContext.request.contextPath}/domain/productlist/search"
		class="ajaxy button button-search"><spring:message code="productList" />
	</a>
	<span class="ui-state-highlight button button-create"><spring:message code="crud.functionalities.create" />
	</span>
	<form:form
		action="${pageContext.request.contextPath}/domain/productlist/create"
		modelAttribute="productList" method="POST" enctype="multipart/form-data" onsubmit="return validate()" >
		<form:errors cssClass="error" />
		<form:hidden path="productId" />
		<table class="create">
			<tbody>
				<tr>
					<th>
						<spring:message code="productList_productType" />
					</th>
					<td>
						<form:select path="productType" items="${productTypeList}" itemValue="value" itemLabel="name" />
						<form:errors path="productType" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_name" />
						<em>*</em>
					</th>
					<td>
						<form:input path="name" cssClass="required {maxlength: 200}" maxlength="200" size="100" />
						<form:errors path="name" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_categoryId" />
						<em>*</em>
					</th>
					<td>
						<form:select path="categoryId">
							<form:options items="${productCategoryList}" itemValue="value" itemLabel="label" />
						</form:select>
						<form:errors path="categoryId" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_billingType" />
						<em>*</em>
					</th>
					<td>
						<form:select path="billingTypeId" id="platform">
							<form:options items="${billingTypeList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="billingTypeId" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_price" />
						<em>*</em>
					</th>
					<td>
						<form:input path="price" value="0" cssClass="required" />
						<form:errors path="price" cssClass="error" />
					</td>
				</tr>

				<tr>
					<th>
						<spring:message code="productList_label" />
					</th>
					<td>
						<form:input path="label" cssClass="{maxlength: 200}"
							maxlength="200" size="100" />
						<form:errors path="label" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_tagLine" />
					</th>
					<td>
						<form:input path="tagLine" cssClass="{maxlength: 255}" maxlength="255" size="100" />
						<form:errors path="tagLine" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_productVersion" />
					</th>
					<td>
						<form:input path="productVersion" cssClass="{maxlength: 100}" maxlength="100" size="100" />
						<form:errors path="productVersion" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_importBy" />
						<em>*</em>
					</th>
					<td>
						<form:select path="importBy">
							<form:options items="${importByList}" itemValue="name" itemLabel="name" />
						</form:select>
						<form:errors path="importBy" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_productSource" />
						<em>*</em>
					</th>
					<td>
						<form:select path="sourceId">
							<form:options items="${productSourceList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="productSource" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_cooperationModel" />
						<em>*</em>
					</th>
					<td>
						<form:select path="cooperationModelId">
							<form:options items="${cooperationList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="cooperationModelId" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_operationModel" />
						<em>*</em>
					</th>
					<td>
						<form:select path="operationModelId">
							<form:options items="${operationList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="operationModelId" cssClass="error" />
					</td>
				</tr>

				<tr>
					<th>
						<spring:message code="productList_developer" />
					</th>
					<td>
						<form:input path="developer" cssClass="{maxlength: 200}" maxlength="200" size="100" />
						<form:errors path="developer" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_operator" />
					</th>
					<td>
						<form:select path="operatorId">
							<form:options items="${operatorList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="operatorId" cssClass="error" />
					</td>
				</tr>
				
				<tr>
					<th>
						<spring:message code="productList_merchant" />
					</th>
					<td>
						<form:select path="merchantId">
							<form:options items="${merchantList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="merchantId" cssClass="error" />
					</td>
				</tr>

				<tr>
					<th>
						<spring:message code="productList_languageType" />
					</th>
					<td>
						<form:input path="languageType" cssClass="{maxlength: 200}"	maxlength="200" size="100" />
						<form:errors path="languageType" cssClass="error" />
					</td>
				</tr>

				<tr>
					<th>
						<spring:message code="productList_starLevel" />
						<em>*</em>
					</th>
					<td>
						<form:select path="starLevel">
							<c:forEach var="idx" items="1,1.5,2,2.5,3,3.5,4,4.5,5">
								<form:option value="${idx}">${idx}</form:option>
							</c:forEach>
						</form:select>
						<form:errors path="starLevel" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_safeType" />
						<em>*</em>
					</th>
					<td>
						<form:select path="safeType" items="${safeTypeList}" itemValue="value" itemLabel="name" disabled="true"/>
						<form:errors path="safeType" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_description" />
					</th>
					<td>
						<form:textarea path="description" cssClass="{maxlength: 1024}" maxlength="1024" />
						<form:errors path="description" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_cover" />
						<em>*</em>
					</th>
					<td>
						<input type="file" name="cover" id="cover" class="required"/>
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_icon" />
						<em>*</em>
					</th>
					<td>
						<input type="file" name="icon" id="icon" class="required"/>
					</td>
				</tr>
				<tr id="tr_totalDl" style="display:none;">
					<th>
						<spring:message code="productState_totalDl" />
					</th>
					<td>
						<form:input path="productState.totalDl" cssClass="number" min="0" maxlength="18"/>
						<form:errors path="productState.totalDl" cssClass="error" />
					</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="2">
						<spring:message code="crud.save.button" var="saveButton"/>
						<input type="submit" class="button button-save"	value="${saveButton}" />
					</td>
				</tr>
			</tfoot>
		</table>
	</form:form>
</body>
</html>