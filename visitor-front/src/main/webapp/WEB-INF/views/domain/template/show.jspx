<html xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:spring="http://www.springframework.org/tags" xmlns:jsp="http://java.sun.com/JSP/Page" 
xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt" 
xmlns:form="http://www.springframework.org/tags/form" xmlns:page="urn:jsptagdir:/WEB-INF/tags/form" version="2.0">
<jsp:output omit-xml-declaration="yes" />
<jsp:directive.page contentType="text/html; charset=UTF-8" />
<head>
	<title><spring:message code="template" />: <spring:message code="crud.functionalities.show" /></title>
</head>
<body>

	<a href="${pageContext.request.contextPath}/domain/template/search" class="ajaxy button button-search"><spring:message code="template" /></a>
	<span class="ui-state-highlight button button-show"><spring:message code="crud.show.button" /></span>
	<a href="${pageContext.request.contextPath}/domain/template/update/${template.primaryKey}" class="ajaxy button button-edit"><spring:message code="crud.edit.button" /></a>
	<a href="${pageContext.request.contextPath}/domain/template/edit/${template.primaryKey}" class="ajaxy button button-edit"><spring:message code="crud.edit.CMS" /></a>
	<a href="${pageContext.request.contextPath}/domain/template/delete/${template.primaryKey}" class="modal button button-delete"><spring:message code="crud.delete.button" /></a>
	<a href="${pageContext.request.contextPath}/domain/template/publish/${template.primaryKey}" class="button button-edit"><spring:message code="template_publish"/></a>

	<table class="show">
		<tbody>
			<tr>
				<th><spring:message code="template_name" /></th>
				<td><spring:eval expression="template.name"/></td>
				<th><spring:message code="template_type" /></th>
				<c:if test="${template.type == 0}"><td><spring:message code="template_type_0" /></td></c:if>
				<c:if test="${template.type == 1}"><td><spring:message code="template_type_1" /></td></c:if>
				<c:if test="${template.type == 2}"><td><spring:message code="template_type_2" /></td></c:if>
				<c:if test="${template.type == 3}"><td><spring:message code="template_type_3" /></td></c:if>
			</tr>
			<tr>
				<th><spring:message code="template_createBy" /></th>
				<td><spring:eval expression="template.createBy"/></td>
				<th><spring:message code="template_createDate" /></th>
				<td><spring:eval expression="template.createDate"/></td>
			</tr>
			<tr>
				<th><spring:message code="template_modBy" /></th>
				<td><spring:eval expression="template.modBy"/></td>
				<th><spring:message code="template_modDate" /></th>
				<td><spring:eval expression="template.modDate"/></td>
			</tr>
			<tr>
				<th><spring:message code="template_publishBy" /></th>
				<td><spring:eval expression="template.publishBy"/></td>
				<th><spring:message code="template_publishDate" /></th>
				<td><spring:eval expression="template.publishDate"/></td>
			</tr>
			<tr>
				<th><spring:message code="template_description" /></th>
				<td colspan="3"><spring:eval expression="template.description"/></td>
			</tr>
		</tbody>
	</table>
	
	<c:if test="${template.htmlPages != null}">
	<span class="ui-state-highlight button"><spring:message code="template_fragement" /></span>
	<table class="show">
		<thead>
			<tr>
				<th style="width:10%"><spring:message code="site" /></th>
				<th style="width:15%"><spring:message code="folder" /></th>
				<th style="width:10%"><spring:message code="folder_page_title_name" /></th>
				<th style="width:10%"><spring:message code="folder_page_title_type" /></th>
				<th style="width:10%"><spring:message code="folder_page_title_publish" /></th>
				<th style="width:10%"><spring:message code="folder_page_title_publishBy" /></th>
				<th style="width:10%"><spring:message code="folder_page_title_publishDate" /></th>
				<th><spring:message code="folder_page_title_operate" /></th>
			</tr>
		</thead>
		<tbody>
			<c:forEach items="${template.htmlPages}" var="htmlPage" varStatus="status">
			<tr>
				<td>
					<a href="${pageContext.request.contextPath}/domain/site/show/${htmlPage.folder.siteId}">${htmlPage.folder.site.name}</a>
				</td>
				<td>
					<a href="${pageContext.request.contextPath}/domain/folder/show/${htmlPage.folderId}">${htmlPage.folder.name}</a>
				</td>
				<td>
					${htmlPage.name}
				</td>
				<td>
					<c:choose>
						<c:when test="${htmlPage.ifDefaultPage}">
							<spring:message code="folder_page_title_type_default" />
						</c:when>
						<c:otherwise>
							<spring:message code="folder_page_title_type_person" />
						</c:otherwise>
					</c:choose>
				</td>
				<td>
					<c:choose>
						<c:when test="${htmlPage.publishStatus == 1}">
							<spring:message code="htmlPage_ifDefaultPage_true" />
						</c:when>
						<c:otherwise>
							<spring:message code="htmlPage_ifDefaultPage_false" />
						</c:otherwise>
					</c:choose>
				</td>
				<td>
					${htmlPage.publishBy}
				</td>
				<td>
					<fmt:formatDate value="${htmlPage.publishDate}" type="date" pattern="yyyy-MM-dd"/>
				</td>
				<td>
					<a href="${pageContext.request.contextPath}/domain/htmlpage/edit/${htmlPage.primaryKey}" class="button button-edit"><spring:message code="folder_page_operate_edit"/></a>
				</td>
			</tr>
			</c:forEach>
		</tbody>
	</table>
	</c:if>
</body>
</html>