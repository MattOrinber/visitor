<html xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" 
xmlns:decorator="http://www.opensymphony.com/sitemesh/decorator" xmlns:c="http://java.sun.com/jsp/jstl/core" 
xmlns:form="http://www.springframework.org/tags/form" xmlns:security="http://www.springframework.org/security/tags" 
xmlns:fmt="http://java.sun.com/jsp/jstl/fmt" xmlns:spring="http://www.springframework.org/tags" version="2.0">
<jsp:output omit-xml-declaration="yes" />
<jsp:directive.page contentType="text/html; charset=UTF-8" />
<head>
	<script type="text/javascript">
		function validate(){
			var rtn = confirm("确认将选中产品全部解除绑定吗？");
			if (rtn) {
				return true;
			} else {
				return false;
			}
		}
		
		function checkAll(){
		if($("input[name='all']").attr("checked") == true){
			$("input[name='productsitefolders']").attr("checked","checked");
		} else {
			$("input[name='productsitefolders']").removeAttr("checked");
		}
	}
	</script>

	<title><spring:message code="folder" />: <spring:message code="crud.functionalities.example" /></title>
</head>
<body>
<a href="${pageContext.request.contextPath}/domain/folder/show/${folder.folderId}" class="ajaxy button button-show"><spring:message code="crud.show.button" /><spring:message code="folder" /></a>
<span class="ui-state-highlight button button-show"><spring:message code="folder_product_more" /></span>
<a href="${pageContext.request.contextPath}/domain/folder/addproduct?folderId=${folder.folderId}" class="ajaxy button button-create"><spring:message code="folder_product_add" /></a>
		<table class="show">
		<thead>
			<tr>
				<th><input type="checkbox" name="all" onclick="checkAll();"/><spring:message code="ANY" /></th>
				<th><util:sort-header model="productSiteFolder" attribute="product" url="product"/></th>
				<th><spring:message code="productList_name"/></th>
				<th><spring:message code="productList_downStatus"/></th>
				<th><spring:message code="productList_billingType"/></th>
				<th><spring:message code="productList_category"/></th>
				<th><spring:message code="productList_modDate" /></th>
				<th><spring:message code="productSiteFolder_sortOrder" /></th>
				<th></th>
			</tr>
		</thead>
			<tbody>
			<c:choose>
			<c:when test="${!empty productSiteFolders}">
			<form:form action="${pageContext.request.contextPath}/domain/productsitefolder/deleteselect?folderId=${folder.folderId}" modelAttribute="productListSearchForm" method="POST" onsubmit="return validate()">
				<c:forEach items="${productSiteFolders}" var="productSiteFolder" varStatus="status">
					<tr>
						<td>
							<input type="checkbox" name="productsitefolders" value="${productSiteFolder.primaryKey}" />
						</td>
						<td>
							${productSiteFolder.product.productId}
						</td>
						<td>
							<a href="${pageContext.request.contextPath}/domain/productlist/show/${productSiteFolder.product.productId}">${productSiteFolder.product.name}</a>
						</td>
						<td>
							<c:if test="${productSiteFolder.product.downStatus==0}"><spring:message code="productList_status_enable" /></c:if>
							<c:if test="${productSiteFolder.product.downStatus==1}"><font color="red"><spring:message code="productList_status_disable" /></font></c:if>
						</td>						
						<td>
							${productSiteFolder.product.billingType.name}
						</td>
						<td>
							${productSiteFolder.product.category.name}
						</td>
						<td>
							<fmt:formatDate value="${productSiteFolder.product.modDate}" type="date" pattern="yyyy-MM-dd"/>
						</td>
						<td><c:out value="${productSiteFolder.sortOrder}" /></td>
						<td>
							<a href="${pageContext.request.contextPath}/domain/productsitefolder/update/${productSiteFolder.primaryKey}" class="button button-edit miniature"><spring:message code="crud.edit.button"/></a>
							<a href="${pageContext.request.contextPath}/domain/productsitefolder/delete1/${productSiteFolder.primaryKey}" class="button button-delete modal miniature"><spring:message code="crud.delete.button"/></a>
						</td>
					</tr>
				</c:forEach>
				<tr>
					<th colspan="4">
					</th>
					<td colspan="5">
						<spring:message code="productSiteFolder_unbind" var="del_bind"/>
						<input type="submit" class="button button-search" value="${del_bind}" />
					</td>
				</tr>
			</form:form>
			</c:when>
			<c:otherwise>
				<tr><td colspan="8"><spring:message code="folder_product_none" /></td></tr>
			</c:otherwise>
			</c:choose>
			</tbody>
			<tfoot>
				<tr>
					<th colspan="2">
					</th>
					<th colspan="4">
						<util:navigation totalSize="${productSiteFoldersCount}" search="${productSiteFolderSearchForm.sp}" url="product" totalPages="${totalPages}" render="${productSiteFoldersCount > 0}" />
					</th>
					<th colspan="2"><spring:message code="search.total" arguments="${productSiteFoldersCount}" /></th>
				</tr>
				<tr>
					<td colspan="8">
						<a href="${pageContext.request.contextPath}/domain/folder/show/${folder.folderId}" class="button"><spring:message code="return"/></a>
					</td>
				</tr>
			</tfoot>
		</table>
</body>
</html>