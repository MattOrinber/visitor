<html xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:decorator="http://www.opensymphony.com/sitemesh/decorator" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:security="http://www.springframework.org/security/tags" xmlns:spring="http://www.springframework.org/tags">

<jsp:directive.page contentType="text/html;charset=UTF-8" />
<jsp:output omit-xml-declaration="yes" />

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Day Fetch</title>
	<link href="${pageContext.request.contextPath}/static/css/admin.css" rel="stylesheet" type="text/css" />

	<!-- custom js library -->
    <script type="text/javascript" src="${pageContext.request.contextPath}/static/script/jquery-1.5.2/jquery.min.js"><c:out value=" " /></script>
    <script type="text/javascript" src="${pageContext.request.contextPath}/static/script/jquery.form.js"><c:out value=" " /></script>
	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/jquery.md5.js"><c:out value=" " /></script>
	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/jquery-validation-1.8.0/jquery.validate.js"><c:out value=" " /></script>
	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/jquery.json-2.4.js"><c:out value="" /></script>
	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/testPublish.js"><c:out value=" " /></script>
	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/admin.js"><c:out value=" " /></script>
	
	<script type="text/javascript">
		var pathGlobe = '${pageContext.request.contextPath}';
	</script>
</head>

<body>
<![CDATA[
<div class="header">
    <div class="head">
    	<div class="logo"><a href="javascript:void(0);"><img src="${pageContext.request.contextPath}/static/img/logo-red.png" /></a></div>
    </div>
</div>

<div class="nav">
	<div class="nav-detail">
    	<span>Welcome,Adminstrator!</span>
        <a href="javascript:void(0);" class="logout">Logout</a>
    </div>
</div>

<div class="main">
	<div class="leftmenu">
    	<ul id="adminTags">
    		]]>
    		<c:choose>
    			<c:when test="${pageType eq 0}">
    				<li class="choosed"><a href="javascript:void(0);" >用户管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=0&p=1">用户管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 1}">
    				<li class="choosed"><a href="javascript:void(0);" >页面常量管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=1&p=1">页面常量管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 2}">
    				<li class="choosed"><a href="javascript:void(0);">城市管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=2&p=1">城市管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 3}">
    				<li class="choosed"><a href="javascript:void(0);">主页城市推荐位管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=3&p=1">主页城市推荐位管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 4}">
    				<li class="choosed"><a href="javascript:void(0);">Activities(产品)管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=4&p=1">Activities(产品)管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 5}">
    				<li class="choosed"><a href="javascript:void(0);">订单管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=5&p=1">订单管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
    		
    		<c:choose>
    			<c:when test="${pageType eq 6}">
    				<li class="choosed"><a href="javascript:void(0);">页面文章管理</a></li>
    			</c:when>
    			<c:otherwise>
    			<![CDATA[
    				<li><a href="${pageContext.request.contextPath}/day/admin?type=6&p=1">页面文章管理</a></li>
    			]]>
    			</c:otherwise>
    		</c:choose>
            
            <![CDATA[
        </ul>
    </div>
    <div class="rightbox">
    ]]>
    
    	<c:choose>
    	<c:when test="${pageType eq 0}">
	    	<![CDATA[
	    	<div id="detail0" style="display:block;">
	        	<span><label>Email</label><input id="searchEmailStr" type="text" placeholder="bob@gmail.com" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="20%">ID</th>
	                <th width="30%">EMAIL</th>
	                <th width="30%">用户类型</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="userTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:void(0);">${userTemp.userId}</a></td>
			                <td>${userTemp.userEmail}</td>
			                <td>
			                	<c:choose>
			                		<c:when test="${userTemp.userType eq 0}"><p>普通用户</p>
			                		</c:when>
			                		<c:when test="${userTemp.userType eq 1}"><p>Facebook用户</p>
			                		</c:when>
			                		<c:when test="${userTemp.userType eq 2}"><p>管理员</p>
			                		</c:when>
			                		<c:otherwise>
			                		</c:otherwise>
			                	</c:choose>
			                </td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="4">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=0&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=0&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        ]]>
        </c:when>
        <c:when test="${pageType eq 1}">
        	<![CDATA[
	    	<div id="detail1" style="display:block;">
	        	<span><label>键</label><input id="searchEmailStr" type="text" placeholder="paypal" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <span><a href="javascript:addFloopy();">增加</a></span>
	            <span><a href="javascript:publishAllFloopy();">发布全部</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="20%">ID</th>
	                <th width="30%">键</th>
	                <th width="30%">描述</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="floopyTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:toUpdateFloopy('${floopyTemp.floopyId}','${floopyTemp.floopyKey}','${floopyTemp.floopyValue}','${floopyTemp.floopyDesc}');">${floopyTemp.floopyId}</a></td>
			                <td>${floopyTemp.floopyKey}</td>
			                <td>${floopyTemp.floopyDesc}</td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="4">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=1&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=1&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        
	        <div id="floopyDetail" style="display:none;">
	        	<input id="floopyIdStr" type="hidden" value="" />
	        	<span><a id="backBtn" href="javascript:backToFloopyValueList();">返回</a></span>
	        	<span><label>常量键</label><input id="floopyKeyStr" type="text" /></span>
	        	<span><label>常量值</label><input id="floopyValueStr" type="text" /></span>
	        	<span><label>常量描述</label><input id="floopyDescStr" type="text" /></span>
	            <span><a id="updateBtn" href="javascript:updateFloopyValue();"></a></span>
	        </div>
	        ]]>
        </c:when>
        <c:when test="${pageType eq 2}">
        	<![CDATA[
	    	<div id="detail2" style="display:block;">
	        	<span><label>city</label><input id="searchEmailStr" type="text" placeholder="New York" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="30%">ID</th>
	                <th width="40%">城市名称</th>
	                <th width="30%">操作</th>
	              </tr>
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="cityTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:void(0);">${cityTemp.cityId}</a></td>
			                <td>${cityTemp.cityName}</td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="3">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=2&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=2&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        ]]>
        </c:when>
        <c:when test="${pageType eq 3}">
        	<![CDATA[
	    	<div id="detail3" style="display:block;">
	        	<span><label>Name</label><input id="searchEmailStr" type="text" placeholder="One" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <span><a href="javascript:toAddContainer();">添加</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="20%">ID</th>
	                <th width="30%">容器名称</th>
	                <th width="30%">容器类型</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="containerTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:toDisplayContainerVal('${containerTemp.containerId}','${containerTemp.containerName}','${containerTemp.containerType}','${containerTemp.containerProductkey}', '${containerTemp.containerPicpaths}');">${containerTemp.containerId}</a></td>
			                <td>${containerTemp.containerName}</td>
			                <td>
			                	<c:choose>
			                		<c:when test="${containerTemp.containerType eq 0}"><p>活动</p>
			                		</c:when>
			                		<c:when test="${containerTemp.containerType eq 1}"><p>城市</p>
			                		</c:when>
			                		<c:otherwise>
			                		</c:otherwise>
			                	</c:choose>
			                </td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="4">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=3&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=3&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        
	        <div id="containerDetail" style="display:none;">
	        	<input id="containerIdStr" type="hidden" value=""/>
	        	<span><a id="backBtn" href="javascript:backToContainerList();">返回</a></span>
	        	<span><label>容器名称</label><input id="containerNameStr" type="text" /></span>
	        	<span><label>容器类型</label>
	        		<select id="containerTypeStr">
	        			<option value=""></option>
	        			<option value="0">活动</option>
	        			<option value="1">城市</option>
	        		</select>
	        	</span>
	        	<span><label>容器值(city ID或者Activity ID)</label><input id="containerValueStr" type="text" /></span>
	            <span><a id="updateBtn" href="javascript:updateContainerValue();">保存</a></span>
	            
	            <form id="containerPictureFileForm" style="display:none">
	            	<span><label>容器图片</label><input id="containerPicture" name="containerPicture" type="file" /></span>
	            	<span><a id="updatePicBtn" href="javascript:updateContainerPicture();">上传</a></span>
	            	<div id="picturePreview" style="width:200px;height:150px"></div>
	            </form>
	        </div>
	        ]]>
        </c:when>
        <c:when test="${pageType eq 4}">
        	<![CDATA[
	    	<div id="detail4" style="display:block;">
	        	<span><label>City</label><input id="searchEmailStr" type="text" placeholder="New York" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="20%">ID</th>
	                <th width="20%">标题</th>
	                <th width="30%">城市</th>
	                <th width="10%">价格</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="productTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:void(0);">${productTemp.productId}</a></td>
			                <td>
			                	<c:choose>
			                		<c:when test="${not empty productTemp.productOverviewtitle}">${productTemp.productOverviewtitle}</c:when>
			                		<c:otherwise>--</c:otherwise>
			                	</c:choose>
			                </td>
			                <td>${productTemp.productCity}</td>
			                <td>${productTemp.productCurrency} ${productTemp.productBaseprice}</td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="5">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=4&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=4&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        ]]>
        </c:when>
        <c:when test="${pageType eq 5}">
        	<![CDATA[
	    	<div id="detail5" style="display:block;">
	        	<span><label>Product Id</label><input id="searchEmailStr" type="text" placeholder="10002" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="15%">ID</th>
	                <th width="15%">product Id</th>
	                <th width="20%">用户邮箱</th>
	                <th width="20%">总价格</th>
	                <th width="10%">状态</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="orderTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:void(0);">${orderTemp.orderId}</a></td>
			                <td align="center"><a style="text-decoration:underline;color:blue;" href="javascript:void(0);">${orderTemp.orderProductId}</a></td>
			                <td>${orderTemp.orderUserEmail}</td>
			                <td>${orderTemp.orderCurrency} ${orderTemp.orderTotalAmount}</td>
			                <td>
			                	<c:choose>
			                		<c:when test="${not empty orderTemp.orderStatus and orderTemp.orderStatus eq 4}">已支付</c:when>
			                		<c:otherwise>未支付</c:otherwise>
			                	</c:choose>
			                </td>
			                <td align="center"><a href="javascript:void(0);">发布</a></td>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="6">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=5&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=5&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        ]]>
        </c:when>
        
        <c:when test="${pageType eq 6}">
        	<![CDATA[
	    	<div id="detail6" style="display:block;">
	        	<span><label>Name</label><input id="searchEmailStr" type="text" placeholder="One" /></span>
	            <span><a href="javascript:toUserSearchResult();">查询(待实现)</a></span>
	            <span><a href="${pageContext.request.contextPath}/day/admin?type=10">添加文章</a></span>
	            <table width="100%" border="0" cellpadding="0" cellspacing="1">
	              <tr>
	                <th width="20%">ID</th>
	                <th width="30%">文章名称</th>
	                <th width="30%">文章描述</th>
	                <th width="20%">操作</th>
	              </tr>
	              
	        ]]>
	              <c:if test="${not empty itemCount and itemCount gt 0}">
		              <c:forEach items="${itemList}" var="articleTemp" varStatus="_st">
		                  <tr>
			                <td align="center"><a href="javascript:void(0);">${articleTemp.articleId}</a></td>
			                <td>${articleTemp.articleName}</td>
			                <td>${articleTemp.articleDesc}</td>
			                <![CDATA[<td align="center"><a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=10&name=${articleTemp.articleName}">查看</a></td>]]>
			              </tr>
		              </c:forEach>
	              </c:if>
	              
	              <c:if test="${not empty pageNumber and pageNumber gt 1}">
					<tr>
						<td align="center" colspan="4">
							<c:choose>
					 		<c:when test="${ifEnd eq 0}"><a href="javascript:void(0);">前一页</a></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=6&p=${pageIndex-1}">前一页</a>]]></c:otherwise>
					 	</c:choose>
					 	<input id="pageIdxStr" type="text" value="${pageIndex}" style="width:50px" />
					 	<c:choose>
					 		<c:when test="${ifEnd eq 2}"><a href="javascript:void(0);">后一页</a><span>共${pageNumber}页</span></c:when>
					 		<c:otherwise><![CDATA[<a style="text-decoration:underline;color:blue;" href="${pageContext.request.contextPath}/day/admin?type=6&p=${pageIndex+1}">后一页</a><span>共${pageNumber}页</span>]]></c:otherwise>
					 	</c:choose>
						</td>
					</tr>
				   </c:if>
	              
	        <![CDATA[
	            </table>
	        </div>
	        ]]>
        </c:when>
        
        <c:when test="${pageType eq 10}">
        	<script type="text/javascript" src="${pageContext.request.contextPath}/static/script/ckedit/ckeditor.js"><c:out value="" /></script>
        	<script type="text/javascript">
        		function setContentValue() {
        			if (articleContentTemp != '') {
        				var editor = CKEDITOR.instances.articleContentStr;
        				editor.insertHtml(articleContentTemp);
	    			}
        		}
	        	$(document).ready(function(){
	        		var node = $("#articleContentStr");
	        		if (node != null) {
	        			CKEDITOR.replace( 'articleContentStr', {
	        				on: {
	        					instanceReady:setContentValue
	        				},
	        				coreStyles_bold: { 
	        					element: 'b' 
	        				},
	        				coreStyles_italic: { 
	        					element: 'i' 
	        				},
	        		
	        				fontSize_style: {
	        					element: 'font',
	        					attributes: { 'size': '#(size)' }
	        				},
	        				width:800,
	        				height:250
	        			});
	        		}
	    		});
	        	
	        	function updateArticleValue() {
	        		var mark = $.trim($("#articleIdStr").val());
	        		
	        		var nameStr = $.trim($("#articleNameStr").val());
	        		var descStr = $.trim($("#articleDescStr").val());
	        		var editor = CKEDITOR.instances.articleContentStr;
	        		var contentStr = editor.getData();
	        		
	        		if (nameStr != "" && descStr != "" && contentStr != "") {
	        			
	        			var articleTemp = {};
	        			articleTemp.nameStr = nameStr;
	        			articleTemp.descStr = encodeURIComponent(descStr);
	        			articleTemp.contentStr = encodeURIComponent(contentStr);
	        			
	        			var jsonStr = $.toJSON(articleTemp);
	        			console.log(jsonStr);
	        			
	        			if (mark == "") {
	        				var urlStrStr = pathGlobe + '/article/addOne';
	        			    
	        			    $.ajax({ 
	        			        type : 'POST',  
	        			        contentType : 'application/json',  
	        			        url : urlStrStr,  
	        			        processData : false,  
	        			        dataType : 'json',  
	        			        data : jsonStr,  
	        			        success : function(data) {  
	        			        	if (data.result == 0) {
	        			        		alert("增加文章成功");
	        			        	} else {
	        			        		var dataRes = "add article result: " + data.result + "; resultDesc: " + data.resultDesc;
	        			        		alert(dataRes);
	        			        	}
	        			        },  
	        			        error : function() {  
	        			            alert('network error during adding one article');  
	        			        }  
	        			    }); 
	        			} else {
	        				var urlStrStr = pathGlobe + '/article/updateOne';
	        			    
	        			    $.ajax({ 
	        			        type : 'POST',  
	        			        contentType : 'application/json',  
	        			        url : urlStrStr,  
	        			        processData : false,  
	        			        dataType : 'json',  
	        			        data : jsonStr,  
	        			        success : function(data) {  
	        			        	if (data.result == 0) {
	        			        		alert("更新文章成功");
	        			        	} else {
	        			        		var dataRes = "update article result: " + data.result + "; resultDesc: " + data.resultDesc;
	        			        		alert(dataRes);
	        			        	}
	        			        },  
	        			        error : function() {  
	        			            alert('network error during updating one article');  
	        			        }  
	        			    }); 
	        			}
	        		} else {
	        			alert("请输入正确的值");
	        		}
	        	}
			</script>
        	<![CDATA[
        		<div id="containerDetail" style="display:none;">
        		]]>
        		<c:choose>
        			<c:when test="${not empty article}">
        				<script type="text/javascript">var articleContentTemp = '${article.articleContent}';</script>
        				<input id="articleIdStr" type="hidden" value="${article.articleId}"/>
			        	<![CDATA[<span><a id="backBtn" href="${pageContext.request.contextPath}/day/admin?type=6&p=1">返回</a></span>]]>
			        	<span><label>文章名称</label><input id="articleNameStr" disabled="disabled" type="text" value="${article.articleName}"/></span>
			        	<span><label>文章描述</label><input id="articleDescStr" type="text" value="${article.articleDesc}"/></span>
			        	<span><label>文章内容</label><textarea id="articleContentStr"></textarea></span>
			            <span><a id="updateBtn" href="javascript:updateArticleValue();">保存</a></span>
        			</c:when>
        			<c:otherwise>
        				<script type="text/javascript">var articleContentTemp = '';</script>
        				<input id="articleIdStr" type="hidden" value=""/>
			        	<![CDATA[<span><a id="backBtn" href="${pageContext.request.contextPath}/day/admin?type=6&p=1">返回</a></span>]]>
			        	<span><label>文章名称</label><input id="articleNameStr" type="text" /></span>
			        	<span><label>文章描述</label><input id="articleDescStr" type="text" /></span>
			        	<span><label>文章内容</label><textarea id="articleContentStr"></textarea></span>
			            <span><a id="updateBtn" href="javascript:updateArticleValue();">保存</a></span>
        			</c:otherwise>
        		</c:choose>
		        <![CDATA[
		        </div>
        	]]>
        </c:when>
        
        </c:choose>
        <![CDATA[
    </div>
</div>
]]>
</body>
</html>