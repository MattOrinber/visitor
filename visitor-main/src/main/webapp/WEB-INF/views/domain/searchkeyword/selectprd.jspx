<html xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" 
xmlns:decorator="http://www.opensymphony.com/sitemesh/decorator" xmlns:c="http://java.sun.com/jsp/jstl/core" 
xmlns:form="http://www.springframework.org/tags/form" xmlns:security="http://www.springframework.org/security/tags" 
xmlns:spring="http://www.springframework.org/tags" version="2.0">
<jsp:output omit-xml-declaration="yes" />
<jsp:directive.page contentType="text/html; charset=UTF-8" />
<head>
	<title><spring:message code="searchKeyword" />: <spring:message code="searchKeyword_idlist" /></title>
	<script type="text/javascript">
		function deleteCheck(){
			var itemIds=document.getElementsByName("itemIds");
			
			var count=0;
			var ids="";
			for(var i=0;i &lt; itemIds.length;i++){
				if(itemIds[i].checked){
					count++;
					ids= ids + itemIds[i].value + "_";
				}
			}
			
			if(count==0){
				alert("请至少选择一条记录！");
			}else{
				$.ajax( {
					type : "GET",
					url : "${pageContext.request.contextPath}/domain/searchkeyword/appenditem/${searchKeyword.primaryKey}/" + ids,
					success : function(data) {
						eval("data = " + data);
						if(data.error=="0"){
							/*refreash current page*/
							window.document.location.href="${pageContext.request.contextPath}/domain/searchkeyword/idlist/${searchKeyword.primaryKey}";
						}else{
							alert("添加失败，可能是选择了其它站点的信息所致！"+data.errorInfo);
						}
					}
				})
			}
		}
		
		function changeCheckState(check_style){
			var itemIds=document.getElementsByName("itemIds");
			
			var count=0;
			var ids="";
			
			var checked = true;
			if(check_style=="1"){
				checked = false;
			}
			
			for(var i=0;i &lt; itemIds.length;i++){
				if(itemIds[i].checked == checked){
					itemIds[i].checked = !checked;
				}
			}	
		}
	</script>
	<STYLE>
		.btnSpace {
			margin-right:10px;
		}
	</STYLE>
</head>
<body>
	<a href="${pageContext.request.contextPath}/domain/searchkeyword/search" class="ajaxy button button-search"><spring:message code="searchKeyword" /></a>
	<a href="${pageContext.request.contextPath}/domain/searchkeyword/show/${searchKeyword.primaryKey}" class="button button-show"><spring:message code="crud.show.button" /></a>
	<a href="${pageContext.request.contextPath}/domain/searchkeyword/update/${searchKeyword.primaryKey}" class="ajaxy button button-edit"><spring:message code="crud.edit.button" /></a>
	<a href="${pageContext.request.contextPath}/domain/searchkeyword/delete/${searchKeyword.primaryKey}" class="modal button button-delete"><spring:message code="crud.delete.button" /></a>
	<span class="ui-state-highlight button button-show"><spring:message code="searchKeyword_idlist" /></span>
	
	<!--show form ,to edit the id list -->
		<table class="show">
			<tbody>
				<tr>
					<th><spring:message code="searchKeyword_name" /></th>
					<td><spring:eval expression="searchKeyword.name"/></td>
					<td><spring:message code="searchKeyword_wordKind"/></td>
					<td>
						<c:if test="${searchKeyword.wordKind == 1}">
							<spring:message code="searchKeyword_prd" />
						</c:if>
						<c:if test="${searchKeyword.wordKind == 2}">
							<spring:message code="searchKeyword_fld" />
						</c:if>
						<c:if test="${searchKeyword.wordKind == 3}">
							<spring:message code="searchKeyword_adv" />
						</c:if>
					</td>
				</tr>
				<tr>
					<th><spring:message code="searchKeyword_ids" /></th>
					<td colspan="3">${searchKeyword.idList}</td>
				</tr>
			</tbody>
		</table>
		
	<!--show search form-->
	<form:form action="${pageContext.request.contextPath}/domain/searchkeyword/prdlist" modelAttribute="productListSearchForm" class="search">
		<table class="show">
			<tbody>
				<tr>
					<th>
						<spring:message code="productList_productId" />
					</th>
					<td>
						<form:input path="productList.productId" cssClass="number"/>
						<form:errors path="productList.productId" cssClass="error" />
					</td>
					<th>
						<spring:message code="productList_name" />
					</th>
					<td>
						<form:input path="productList.name" />
						<form:errors path="productList.name" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_createBy" />
					</th>
					<td>
						<form:select path="productList.createBy">
							<form:option value=""><spring:message code="ANY" /></form:option>
							<form:options items="${createByList}" />
						</form:select>
						<form:errors path="productList.createBy" cssClass="error" />
					</td>
					<th>
						<spring:message code="productList_createDate" />
					</th>
					<td>
						<label for="createDateRange.fromDate">
							<spring:message code="search.date.from" />
						</label>
						<form:input path="createDateRange.fromDate" cssClass="datepicker" />
						<label for="createDateRange.toDate">
							<spring:message code="search.date.to" />
						</label>
						<form:input path="createDateRange.toDate" cssClass="datepicker" />
						<form:errors path="productList.createDate" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_billingType" />
					</th>
					<td>
						<form:select path="productList.billingTypeId">
							<form:option value="">全部</form:option>
							<form:options items="${billingTypeList}"
								itemValue="categoryId" itemLabel="name" />
						</form:select>
						<form:errors path="productList.billingTypeId" cssClass="error" />
					</td>
					<th>
						<spring:message code="productList_modDate" />
					</th>
					<td>
						<label for="modDateRange.fromDate">
							<spring:message code="search.date.from" />
						</label>
						<form:input path="modDateRange.fromDate" cssClass="datepicker" />
						<label for="modDateRange.toDate">
							<spring:message code="search.date.to" />
						</label>
						<form:input path="modDateRange.toDate" cssClass="datepicker" />
						<form:errors path="productList.modDate" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_category" />
					</th>
					<td>
						<form:select path="productList.categoryId">
							<form:option value="" ><spring:message code="ANY" /></form:option>
							<form:options items="${productCategoryList}" itemValue="value" itemLabel="label" />
						</form:select>
						<form:errors path="productList.categoryId" cssClass="error" />
					</td>
					<th>
						<spring:message code="productList_productSource" />
					</th>
					<td>
						<form:select path="productList.sourceId">
							<form:option value="" ><spring:message code="ANY" /></form:option>
							<form:options items="${productSourceList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_operator" />
					</th>
					<td>
						<form:select path="productList.operatorId">
							<form:option value="" ><spring:message code="ANY" /></form:option>
							<form:options items="${operatorList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
					</td>
					<th>
						<spring:message code="productList_merchant" />
					</th>
					<td>
						<form:select path="productList.merchantId">
							<form:option value="" ><spring:message code="ANY" /></form:option>
							<form:options items="${merchantList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_cooperationModel" />
					</th>
					<td>
						<form:select path="productList.cooperationModelId">
							<form:option value="" ><spring:message code="ANY" /></form:option>
							<form:options items="${cooperationList}" itemValue="categoryId" itemLabel="name" />
						</form:select>
					</td>
					<th>
						<spring:message code="productList_productSourceId" />
					</th>
					<td>
						<form:input path="productList.productSourceId" />
						<form:errors path="productList.productSourceId" cssClass="error" />
					</td>
				</tr>
				<tr>
					<th>
						<spring:message code="productList_description" />
					</th>
					<td>
						<form:input path="productList.description" />
					</td>
					<th>
						<spring:message code="productList_downStatus" />
					</th>
					<td>
						<form:select path="productList.downStatus">
							<form:option value="" select="select"><spring:message code="productList_status_all" /></form:option>
							<form:option value="0"><spring:message code="productList_status_enable" /></form:option>
							<form:option value="1"><spring:message code="productList_status_disable" /></form:option>
						</form:select>
					</td>
				</tr>
				<tr>
					<th><spring:message code="productList_recommend_storage" /></th>
					<td>
						<form:radiobutton path="productList.recommendStorage" value="" checked="checked"/><spring:message code="ANY" />
						<form:radiobutton path="productList.recommendStorage" value="1" /><spring:message code="TRUE" />
						<form:radiobutton path="productList.recommendStorage" value="0"/><spring:message code="FALSE" />
						<form:errors path="productList.recommendStorage" cssClass="error"/>
					</td>
					<th><spring:message code="productList_safeType" /></th>
					<td>
						<form:select path="productList.safeType">
							<form:option value="" select="select"><spring:message code="productList_status_all" /></form:option>
							<form:options items="${safeTypeList}" itemLabel="name" itemValue="value" />
						</form:select>
					</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="5">
						<spring:message code="crud.search.button" var="btnMessage"/>
						<input type="submit" class="button button-search" value="${btnMessage}" />
					</td>
				</tr>
			</tfoot>
		</table>
	</form:form>
	<!--show search form end-->	
	<jsp:include page="/domain/searchkeyword/prdlist" />
</body>
</html>